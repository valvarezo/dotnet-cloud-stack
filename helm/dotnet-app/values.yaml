# =============================================================================
# Finance App Helm Chart Values
# =============================================================================

# Global settings
global:
  environment: development
  imagePullSecrets: []

# Finance API Configuration
api:
  replicaCount: 2
  
  image:
    repository: finance-api
    tag: latest
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 80
    targetPort: 8080
  
  ingress:
    enabled: true
    className: nginx
    annotations:
      nginx.ingress.kubernetes.io/ssl-redirect: "false"
    hosts:
      - host: app.local
        paths:
          - path: /
            pathType: Prefix
      - host: api.local
        paths:
          - path: /
            pathType: Prefix
    tls: []
  
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "500m"
  
  autoscaling:
    enabled: false
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80
  
  env:
    ASPNETCORE_ENVIRONMENT: Production
    ASPNETCORE_URLS: "http://+:8080"
  
  livenessProbe:
    httpGet:
      path: /health
      port: 8080
    initialDelaySeconds: 15
    periodSeconds: 20
  
  readinessProbe:
    httpGet:
      path: /health
      port: 8080
    initialDelaySeconds: 5
    periodSeconds: 10
  
  securityContext:
    runAsNonRoot: true
    runAsUser: 1000
    readOnlyRootFilesystem: true
    allowPrivilegeEscalation: false

# PostgreSQL Configuration (Bitnami subchart)
postgresql:
  enabled: true
  auth:
    username: postgres
    password: "P@ssw0rd2024Secure!"
    database: financedb
  primary:
    persistence:
      enabled: true
      size: 5Gi
    resources:
      requests:
        memory: "256Mi"
        cpu: "250m"
      limits:
        memory: "512Mi"
        cpu: "500m"
  service:
    type: ClusterIP
    port: 5432

# ConfigMap values
config:
  dbHost: "{{ .Release.Name }}-postgresql"
  dbPort: "5432"
  dbName: "financedb"

# Secret values
secrets:
  connectionString: ""  # Will be generated from postgresql values

# Network Policies
networkPolicy:
  enabled: false
  
# Pod Disruption Budget
podDisruptionBudget:
  enabled: false
  minAvailable: 1

# Service Account
serviceAccount:
  create: true
  name: ""
  annotations: {}
